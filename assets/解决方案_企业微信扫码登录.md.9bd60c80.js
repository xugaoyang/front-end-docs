import{_ as c,A as p,o as e,c as r,x as D,y as n,a0 as y,v as s,a,C as l,M as B}from"./chunks/framework.0a4b53e9.js";const L=JSON.parse('{"title":"saas企业微信扫码登录","description":"","frontmatter":{},"headers":[],"relativePath":"解决方案/企业微信扫码登录.md","filePath":"解决方案/企业微信扫码登录.md"}'),F={name:"解决方案/企业微信扫码登录.md"},i=s("h1",{id:"saas企业微信扫码登录",tabindex:"-1"},[a("saas企业微信扫码登录 "),s("a",{class:"header-anchor",href:"#saas企业微信扫码登录","aria-label":'Permalink to "saas企业微信扫码登录"'},"​")],-1),E=s("h2",{id:"扫码流程",tabindex:"-1"},[a("扫码流程 "),s("a",{class:"header-anchor",href:"#扫码流程","aria-label":'Permalink to "扫码流程"'},"​")],-1),A=s("p",null,"步骤说明：",-1),d=s("li",null,"企业用户进入第三方网站",-1),_=s("li",null,"新窗口打开登录页面",-1),u=s("li",null,[a("用户在企业微信确认并同意授权 "),s("ul",null,[s("li",null,"用户在登录授权页，确认并同意将自己的企业微信和登录账号信息授权给企业或服务商，完成授权流程。")])],-1),m=s("code",null,"@wecom/jssdk",-1),h=s("li",null,[a("利用授权码调用企业微信的相关API "),s("ul",null,[s("li",null,"在得到登录授权码code后，后端即可使用该授权码换取登录授权信息。")])],-1),C=B(`<h2 id="wecom-jssdk-使用" tabindex="-1"><code>@wecom/jssdk</code> 使用 <a class="header-anchor" href="#wecom-jssdk-使用" aria-label="Permalink to &quot;\`@wecom/jssdk\` 使用&quot;">​</a></h2><ol><li>安装</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">add</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">@wecom/jssdk</span></span></code></pre></div><ol start="2"><li>使用</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 引入</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#BABED8;"> ww </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@wecom/jssdk</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 初始化</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> wwLogin </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> ww</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createWWLoginPanel</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">el</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#ww_login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">params</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">login_type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">CorpApp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">appid</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wwbbb6a7b539f2xxxxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">agentid</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">10000xx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">redirect_uri</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://work.weixin.qq.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">state</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">loginState</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">redirect_type</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">callback</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">onCheckWeComLogin</span><span style="color:#89DDFF;">({</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">isWeComLogin</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">isWeComLogin</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">onLoginSuccess</span><span style="color:#89DDFF;">({</span><span style="color:#BABED8;"> </span><span style="color:#BABED8;font-style:italic;">code</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">})</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 登录成功后回调获取code,给后端调用获取企业微信用户信息</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">code</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">onLoginFail</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">err</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">err</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 卸载</span></span>
<span class="line"><span style="color:#BABED8;">wwLogin</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">unmount</span><span style="color:#BABED8;">()</span></span></code></pre></div>`,6);function g(f,w,b,k,x,j){const t=p("Mermaid"),o=p("font");return e(),r("div",null,[i,E,(e(),D(y,null,{default:n(()=>[l(t,{id:"mermaid-6",class:"mermaid",graph:"sequenceDiagram%0Aactor%201%20as%20%E4%BC%81%E4%B8%9A%E7%94%A8%E6%88%B7%0Aparticipant%202%20as%20%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BD%91%E7%AB%99%0Aparticipant%203%20as%20%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6%0Aparticipant%204%20as%20%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1api%0A1-%3E%3E2%3A%20%E4%BC%81%E4%B8%9A%E7%94%A8%E6%88%B7%E8%BF%9B%E5%85%A5%E7%AC%AC%E4%B8%89%E6%96%B9%E7%BD%91%E7%AB%99%0A2-%3E%3E3%3A%20%E5%88%9D%E5%A7%8B%E5%8C%96%E7%99%BB%E5%BD%95%E4%BA%8C%E7%BB%B4%E7%A0%81%E7%BB%84%E4%BB%B6%0A3--%3E%3E1%3A%20%E5%B1%95%E7%A4%BA%E4%BA%8C%E7%BB%B4%E7%A0%81%0A1-%3E%3E3%3A%20%E7%94%A8%E6%88%B7%E7%A1%AE%E8%AE%A4%E7%99%BB%E5%BD%95%0A3-%3E%3E2%3A%20%E6%8E%88%E6%9D%83%E6%88%90%E5%8A%9F%0A2-%3E%3E4%3A%20%E4%BD%BF%E7%94%A8%E7%99%BB%E5%BD%95code%E8%8E%B7%E5%8F%96%E4%BC%81%E4%B8%9A%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%0A"})]),fallback:n(()=>[a(" Loading... ")]),_:1})),A,s("ul",null,[d,s("li",null,[a("第三方网站引导用户进行企业微信登录 "),s("ul",null,[s("li",null,[a("内嵌企业微信登录组件["),l(o,{color:"green"},{default:n(()=>[a("目前使用该方案")]),_:1}),a("]")]),_])]),u,s("li",null,[a("授权后回调URI，得到授权码和过期时间 "),s("ul",null,[s("li",null,[a("授权流程完成后，会进入回调URI，并在URI参数中返回授权码，跳转地址 redirect_uri?code=xxx["),l(o,{color:"orange"},{default:n(()=>[a("目前使用"),m,a("不用跳转回调获取，使用监听方法即可")]),_:1}),a("]")])])]),h]),C])}const P=c(F,[["render",g]]);export{L as __pageData,P as default};
